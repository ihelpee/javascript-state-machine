StateMachine={VERSION:"1.2.0",create:function(a){var c=(typeof a.initial=="string")?{state:a.initial}:a.initial;var f=a.target||{};var d={};var e=function(h){var j=(h.from instanceof Array)?h.from:[h.from];d[h.name]=d[h.name]||{};for(var i=0;i<j.length;i++){d[h.name][j[i]]=h.to}};if(c){c.event=c.event||"startup";e({name:c.event,from:"none",to:c.state})}for(var g=0;g<a.events.length;g++){e(a.events[g])}for(var b in d){if(d.hasOwnProperty(b)){f[b]=this.buildEvent(b,d[b])}}f.current="none";f.is=function(h){return this.current==h};f.can=function(h){return !!d[h][this.current]};f.cannot=function(h){return !this.can(h)};if(c&&!c.defer){f[c.event]()}return f},buildEvent:function(a,b){return function(){if(this.cannot(a)){throw"event "+a+" innapropriate in current state "+this.current}var h=this.current;var g=b[h];var c=this["onbefore"+a];if(c&&(false===c.apply(this,arguments))){return}if(this.current!=g){var d=this["onleave"+this.current];if(d){d.apply(this,arguments)}this.current=g;var e=this["onenter"+g]||this["on"+g];if(e){e.apply(this,arguments)}}var f=this["onafter"+a]||this["on"+a];if(f){f.apply(this,arguments)}}}};
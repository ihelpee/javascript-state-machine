StateMachine={VERSION:"1.3.0",create:function(a,f){var c=(typeof a.initial=="string")?{state:a.initial}:a.initial;var g=f||a.target||{};var d={};var e=function(i){var k=(i.from instanceof Array)?i.from:[i.from];d[i.name]=d[i.name]||{};for(var j=0;j<k.length;j++){d[i.name][k[j]]=i.to}};if(c){c.event=c.event||"startup";e({name:c.event,from:"none",to:c.state})}for(var h=0;h<a.events.length;h++){e(a.events[h])}for(var b in d){if(d.hasOwnProperty(b)){g[b]=this.buildEvent(b,d[b])}}g.current="none";g.is=function(i){return this.current==i};g.can=function(i){return !!d[i][this.current]};g.cannot=function(i){return !this.can(i)};if(c&&!c.defer){g[c.event]()}return g},buildEvent:function(a,b){return function(){if(this.cannot(a)){throw"event "+a+" innapropriate in current state "+this.current}var i=this.current;var h=b[i];var c=this["onbefore"+a];if(c&&(false===c.apply(this,arguments))){return}if(this.current!=h){var d=this["onleave"+this.current];if(d){d.apply(this,arguments)}this.current=h;var f=this["onenter"+h]||this["on"+h];if(f){f.apply(this,arguments)}var e=this["onchangestate"];if(e){e.call(this,i,h)}}var g=this["onafter"+a]||this["on"+a];if(g){g.apply(this,arguments)}}}};